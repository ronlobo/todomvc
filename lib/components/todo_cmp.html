<header class="header">
  <h1>todos</h1>
  <input class="new-todo" placeholder="What needs to be done?" (keyup.enter)="addTodo($event.target)"
         autofocus>
</header>
<section class="main">
  <input class="toggle-all" type="checkbox" [checked]="todoStore.allCompleted()"
         (click)="todoStore.setAllTo($event.target.checked)" *ng-if="todoStore.todos.isNotEmpty">
  <label for="toggle-all">Mark all as complete</label>
  <ul class="todo-list">
    <li *ng-for="#todo of todoStore.filtered"
        [class.completed]="todo.completed"
        [class.editing]="todo.editing">
      <div class="view">
        <input class="toggle" type="checkbox" (click)="todoStore.toggleCompletion(todo.uid)"
               [checked]="todo.completed">
        <label (dblclick)="todo.editTodo()">{{todo.title}}</label>
        <button class="destroy" (click)="todoStore.remove(todo.uid)"></button>
      </div>
      <input class="edit" *ng-if="todo.editing" [value]="todo.title"
             (blur)="saveEditing(todo, $event.target.value)"
             (keyup.enter)="saveEditing(todo, $event.target.value)"
             (keyup.escape)="cancelEditing(todo)">
    </li>
  </ul>
</section>
<footer class="footer">
  <span class="todo-count"><strong>{{ todoStore.todos.length }}</strong>
    {{ todoStore.todos.length == 1 ? 'item' : 'items' }} left</span>
    <!-- TODO needs to be implemented with routing -->
    <ul class="filters">
        <li>
            <a [class.selected]="todoStore.filter.isEmpty" href="#/">All</a>
        </li>
        <li>
            <a [class.selected]="todoStore.filter == 'active'" href="#/active">Active</a>
        </li>
        <li>
            <a [class.selected]="todoStore.filter == 'completed'" href="#/completed">Completed</a>
        </li>
    </ul>
  <button class="clear-completed" (click)="todoStore.removeCompleted()">Clear completed</button>
</footer>
